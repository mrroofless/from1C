
&НаСервере
Процедура РазбитьНаСервере()
	Объект.РезультатРазбиения = "";
	ТекстДляРазбиения = Объект.ИсходныйТекст;
	Объект.РезультатРазбиения = СтрРазбитьНаПодстроки(ТекстДляРазбиения, Объект.КоличествоСимволовВСтроке)
КонецПроцедуры

&НаКлиенте
Процедура Разбить(Команда)
	РазбитьНаСервере();
КонецПроцедуры

Функция СтрРазбитьНаПодстроки(ИсходнаяСтрока, КоличествоСимволовПодстроки)
	КоличествоСимволовПодстроки = ?(КоличествоСимволовПодстроки < 1, 1, КоличествоСимволовПодстроки);
	ИсходнаяСтрока = СтрЗаменить(ИсходнаяСтрока, Символы.ПС, " ");
	//разбить строку на максимальную длину в строке с учётом пробелов
	Пока Истина Цикл
		//получить кол-во строк
		КолВоСтрок = СтрЧислоСтрок(ИсходнаяСтрока);
		//взять последнюю
		ТекСтрока = СтрПолучитьСтроку(ИсходнаяСтрока, КолВоСтрок);
		//если длинее максимума
		Если СтрДлина(ТекСтрока) > КоличествоСимволовПодстроки Тогда
			ТекущаяПозиция = КоличествоСимволовПодстроки;
			СтрВставитьКудаНадоПС(ИсходнаяСтрока, ТекСтрока, КоличествоСимволовПодстроки);
		Иначе
			Прервать;
		КонецЕсли;
	КонецЦикла;
	
	Возврат ИсходнаяСтрока;
КонецФункции

Процедура СтрВставитьКудаНадоПС(ИсходнаяСтрока, ТекСтрока, КоличествоСимволовПодстроки)
	//найти в ней последний пробел
	ТекущаяПозиция = КоличествоСимволовПодстроки;
	ДлинаПодСтроки = СтрДлина(ТекСтрока);
	Пока Истина Цикл
		Если КодСимвола(ТекСтрока, ТекущаяПозиция) = 32 Тогда
			//заменить пробел на перенос
			ВремСтрока = Лев(ТекСтрока, ТекущаяПозиция - 1) + Символы.ПС + Сред(ТекСтрока, ТекущаяПозиция + 1, ДлинаПодСтроки - ТекущаяПозиция);
			//заменить строку в основной
			ИсходнаяСтрока = СтрЗаменить(ИсходнаяСтрока, ТекСтрока, ВремСтрока);
			Прервать;
		ИначеЕсли ТекущаяПозиция = 1 Тогда
			//отрезать первый кусок
			ПоБуквам = (КоличествоСимволовПодстроки = 1);
			ВремСтрока = Лев(ТекСтрока, ?(ПоБуквам, КоличествоСимволовПодстроки, КоличествоСимволовПодстроки - 1)) + ?(ПоБуквам, "", "-") + Символы.ПС + Сред(ТекСтрока, ?(ПоБуквам, КоличествоСимволовПодстроки + 1, КоличествоСимволовПодстроки), ДлинаПодСтроки - (КоличествоСимволовПодстроки - 1));
			//заменить строку в основной
			ИсходнаяСтрока = СтрЗаменить(ИсходнаяСтрока, ТекСтрока, ВремСтрока);
			Прервать;
		КонецЕсли;
		ТекущаяПозиция = ТекущаяПозиция - 1;
	КонецЦикла;
КонецПроцедуры

Функция ТранслитерацияТекста(Строка) 
	
   Рез = СокрЛП(Строка);   
   Рез = СтрЗаменить(Рез,"а","a"); 
   Рез = СтрЗаменить(Рез,"б","b"); 
   Рез = СтрЗаменить(Рез,"в","v"); 
   Рез = СтрЗаменить(Рез,"г","g"); 
   Рез = СтрЗаменить(Рез,"д","d"); 
   Рез = СтрЗаменить(Рез,"е","e"); 
   Рез = СтрЗаменить(Рез,"ё","e"); 
   Рез = СтрЗаменить(Рез,"ж","zh"); 
   Рез = СтрЗаменить(Рез,"з","z"); 
   Рез = СтрЗаменить(Рез,"и","i"); 
   Рез = СтрЗаменить(Рез,"к","k"); 
   Рез = СтрЗаменить(Рез,"л","l"); 
   Рез = СтрЗаменить(Рез,"м","m"); 
   Рез = СтрЗаменить(Рез,"н","n"); 
   Рез = СтрЗаменить(Рез,"о","o"); 
   Рез = СтрЗаменить(Рез,"п","p"); 
   Рез = СтрЗаменить(Рез,"р","r"); 
   Рез = СтрЗаменить(Рез,"с","s"); 
   Рез = СтрЗаменить(Рез,"т","t"); 
   Рез = СтрЗаменить(Рез,"у","u"); 
   Рез = СтрЗаменить(Рез,"ф","f"); 
   Рез = СтрЗаменить(Рез,"х","h"); 
   Рез = СтрЗаменить(Рез,"ч","ch"); 
   Рез = СтрЗаменить(Рез,"ш","sh"); 
   Рез = СтрЗаменить(Рез,"щ","sch"); 
   Рез = СтрЗаменить(Рез,"ъ",""); 
   Рез = СтрЗаменить(Рез,"ь",""); 
   Рез = СтрЗаменить(Рез,"э","e"); 
   Рез = СтрЗаменить(Рез,"ю","yu"); 
   Рез = СтрЗаменить(Рез,"й","i"); 
   Рез = СтрЗаменить(Рез,"ц","c"); 
   Рез = СтрЗаменить(Рез,"я","ya"); 
   Рез = СтрЗаменить(Рез,"ы","i"); 
   Рез = СтрЗаменить(Рез,"А","A"); 
   Рез = СтрЗаменить(Рез,"Б","B"); 
   Рез = СтрЗаменить(Рез,"В","V"); 
   Рез = СтрЗаменить(Рез,"Г","G"); 
   Рез = СтрЗаменить(Рез,"Д","D"); 
   Рез = СтрЗаменить(Рез,"Е","E"); 
   Рез = СтрЗаменить(Рез,"Ё","E"); 
   Рез = СтрЗаменить(Рез,"Ж","ZH"); 
   Рез = СтрЗаменить(Рез,"З","Z"); 
   Рез = СтрЗаменить(Рез,"И","I"); 
   Рез = СтрЗаменить(Рез,"К","K"); 
   Рез = СтрЗаменить(Рез,"Л","L"); 
   Рез = СтрЗаменить(Рез,"М","M"); 
   Рез = СтрЗаменить(Рез,"Н","N"); 
   Рез = СтрЗаменить(Рез,"О","O"); 
   Рез = СтрЗаменить(Рез,"П","P"); 
   Рез = СтрЗаменить(Рез,"Р","R"); 
   Рез = СтрЗаменить(Рез,"С","S"); 
   Рез = СтрЗаменить(Рез,"Т","T"); 
   Рез = СтрЗаменить(Рез,"У","U"); 
   Рез = СтрЗаменить(Рез,"Ф","F"); 
   Рез = СтрЗаменить(Рез,"Х","H"); 
   Рез = СтрЗаменить(Рез,"Ч","CH"); 
   Рез = СтрЗаменить(Рез,"Ш","SH"); 
   Рез = СтрЗаменить(Рез,"Щ","SCH"); 
   Рез = СтрЗаменить(Рез,"Ъ",""); 
   Рез = СтрЗаменить(Рез,"Ь",""); 
   Рез = СтрЗаменить(Рез,"Ы","I"); 
   Рез = СтрЗаменить(Рез,"Ц","C"); 
   Рез = СтрЗаменить(Рез,"Э","E"); 
   Рез = СтрЗаменить(Рез,"Ю","YU"); 
   Рез = СтрЗаменить(Рез,"Я","YA"); 
   Рез = СтрЗаменить(Рез,"Й","I");
   
   //Рез = СтрЗаменить(Рез," "," "); 
   //Рез = СтрЗаменить(Рез,"--","-"); 
   //Рез = СтрЗаменить(Рез,"--","-"); 
   //Рез = СтрЗаменить(Рез,"--","-"); 
   //Рез = СтрЗаменить(Рез,"#",""); 
   //Рез = СтрЗаменить(Рез,"№",""); 
   //Рез = СтрЗаменить(Рез,",",""); 
   //Рез = СтрЗаменить(Рез,".",""); 
   //Рез = СтрЗаменить(Рез,"/",""); 
   //Рез = СтрЗаменить(Рез,"""",""); 
   //Рез = СтрЗаменить(Рез,"(",""); 
   //Рез = СтрЗаменить(Рез,")",""); 
   
   Возврат(Рез);
  
КонецФункции

&НаСервере
Процедура ТранслитНаСервере()
	Объект.РезультатРазбиения = "";
	ТекстДляРазбиения = Объект.ИсходныйТекст;
	Объект.РезультатРазбиения = ТранслитерацияТекста(ТекстДляРазбиения);
	
КонецПроцедуры

&НаКлиенте
Процедура Транслит(Команда)
	ТранслитНаСервере();
КонецПроцедуры
